<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Log</title>
    <link rel="stylesheet" href="/public/css/materialize.min.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/public/css/app.css">
    <script type="text/javascript" src="/public/js/materialize.min.js"></script>
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <nav>
        <div class="nav-wrapper container">
            <p>Movie Log</p>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Movies -->
    <div class="movies container grey-text text-darken-1">

    </div>

    <div class="center">
        <a class="btn-floating btn-small btn-large add-btn sidenav-trigger" data-target="side-form">
            <i class="material-icons">add</i>
        </a>
    </div>

    <div id="side-form" class="sidenav side-form">
        <form class="add-movie container section">
            <h6>New Movie</h6>
            <div class="divider"></div>
            <div class="input-field">
                <input placeholder="Enter Movie Title" id="title" class="validate" type="text">
                <label for="title">Movie Title</label>
            </div>
            <div class="input-field">
                <input placeholder="Enter Movie Synopsis" id="synopsis" class="validate" type="text">
                <label for="synopsis">Movie Synopsis</label>
            </div>

            <div class="input-field center">
                <button class="btn-small">Add</button>
            </div>
    </div>
    </form>
    </div>

    <script src="/public/js/ui.js"></script>
    <script src="/public/js/app.js"></script>
    <script type="module" src="/public/js/db.js"></script>
</body>

</html>

<!--<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="/css/materialize.min.css">
    <link type="text/css" rel="stylesheet" href="/css/app.css">
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <title>Movie Log</title>
</head>

<body>
    <nav>
        <div class="nav-wrapper container">
            <p>Movie Log</p>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    Movies

    <div id="side-form" class="sidenav side-form">
        <form id="add-movie-form" class="add-movie container section">
            <h6>New Movie</h6>
            <div class="divider"></div>
                <div class="input-field">
                    <input type="text" placeholder="Enter Movie Title" id="movie" name="movie" class="validate">
                    <label for="movie">Movie Title</label>
                </div>

                <div class="input-field center">
                    <button class="btn-small">Add</button>
                </div>
            </div>
        </form>
    </div>

    <div class="movies container grey-text text-darken-3">
        <ul id="movie-list" class="card-panel movie purple lighten-4 row center"></ul>
      </div>

      <div class="center">
        <a class="btn-floating btn-small btn-large add-btn sidenav-trigger" data-target="side-form">
            <i class="material-icons">add</i>
        </a>
    </div>

    <div class="tasks container grey-text text-darken-1">
        <div class="card-panel task white row">
            <img src="/img/task.png" class="responsive-img materialboxed" alt="">
            <div class="task-detail">
                <div class="task-title">gardening</div>
                <div class="task-description">Sample data</div>
            </div>
            <div class="task-delete">
                <i class="material-icons">delete_outline</i>
            </div>
        </div>
        <div class="card-panel task white row">
            <img src="/img/task.png" class="responsive-img materialboxed" alt="">
            <div class="task-detail">
                <div class="task-title">Office work</div>
                <div class="task-description">Sample data</div>
            </div>
            <div class="task-delete">
                <i class="material-icons">delete_outline</i>
            </div>
        </div>
    </div>

    <div class="center">
        <a class="btn-floating btn-small btn-large add-btn sidenav-trigger" data-target="side-form">
            <i class="material-icons">add</i>
        </a>
    </div>

    <div id="side-form" class="sidenav side-form">
        <form class="add-task container section">
            <h6>New Task</h6>
            <div class="divider"></div>
            <div class="input-field">
                <input placeholder="Enter Task title" id="title" class="validate" type="text">
                <label for="title">Task Title</label>
            </div>
            <div class="input-field">
                <input placeholder="Enter Task description" id="description" class="validate" type="text">
                <label for="description">Task Description</label>
            </div>

            <div class="input-field center">
                <button class="btn-small">Add</button>
            </div>
    </div>
    </form>
    </div>

    <script src="/js/ui.js"></script>
    <script src="/js/app.js"></script>
    <script type="module" src="/js/db.js"></script>


    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc, doc, deleteDoc, query, where, updateDoc } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore.js";

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCCaBC2ZKBaKxGZSchiNeYexfaKeTZcPk0",
            authDomain: "movielog-c6ea1.firebaseapp.com",
            projectId: "movielog-c6ea1",
            storageBucket: "movielog-c6ea1.appspot.com",
            messagingSenderId: "179697430224",
            appId: "1:179697430224:web:278ffa1bb63cb34510f8d5",
            measurementId: "G-8Y6WB7FS40"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function getMovies(db) {
            const moviesCol = collection(db, "movielog");
            const movieSnapshot = await getDocs(moviesCol);
            const movieList = movieSnapshot.docs.map((doc) => doc.data());
            return movieList;
        }

        const movieList = document.querySelector('#movie-list');
        const form = document.querySelector('#add-movie-form')

        function renderMovies(dc) {
            let li = document.createElement("li");
            let movie = document.createElement("span");
            let cross = document.createElement('span');

            li.setAttribute('data-id', dc.id);
            movie.textContent = dc.data().movie;
            cross.textContent = ' x';

            li.appendChild(movie);
            li.appendChild(cross);

            movieList.appendChild(li);

            cross.addEventListener('click', (e) => {
                e.stopPropagation();
                let id = e.target.parentElement.getAttribute('data-id');
                deleteDoc(doc(db, "movielog", id))
            })
        }

        const movies = getDocs(collection(db, "movielog")).then((snapshot) => {
            snapshot.forEach((doc) => {
                renderMovies(doc)
            })
        })

        const q = query(collection(db, "movielog"), where("movie", "==", "Titanic"));
        const querySnapshot = await getDocs(q);
        querySnapshot.forEach((doc) => {
            console.log(doc.id, "=>", doc.data())
        })

        const upDoc = doc(db, "movielog", "Fhq361mXVgBR8ebc8xhS");

        updateDoc(upDoc, {
            name: "Friday the 13th"
        })

        form.addEventListener(('submit'), (e) => {
            e.preventDefault();
            const docRef = addDoc(collection(db, "movielog"), {
                movie: form.movie.value,
            })
        })
    </script>-->
</body>
</html>